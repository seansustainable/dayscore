{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/sean/Projects/dayscore/front/components/FollowList.js\";\nimport React, { useEffect, useState } from 'react';\nimport { List, message, Avatar, Spin, Divider } from 'antd';\nimport reqwest from 'reqwest';\nimport WindowScroller from 'react-virtualized/dist/commonjs/WindowScroller';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport VList from 'react-virtualized/dist/commonjs/List';\nimport InfiniteLoader from 'react-virtualized/dist/commonjs/InfiniteLoader';\nimport { UserOutlined } from \"@ant-design/icons\";\nimport styled from 'styled-components';\nconst Wrapper = styled.div`\n  width: 30%;\n  margin: 10px;\n`;\nconst fakeDataUrl = 'https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo';\n\nconst FollowList = ({\n  header,\n  followInfo\n}) => {\n  const {\n    0: data,\n    1: setData\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const loadedRowsMap = {};\n  useEffect(() => {\n    fetchData(res => {\n      setData(res.results);\n    });\n  }, []);\n\n  const fetchData = callback => {\n    reqwest({\n      url: fakeDataUrl,\n      type: 'json',\n      method: 'get',\n      contentType: 'application/json',\n      success: res => {\n        callback(res);\n      }\n    });\n  };\n\n  const handleInfiniteOnLoad = ({\n    startIndex,\n    stopIndex\n  }) => {\n    setLoading(true);\n\n    for (let i = startIndex; i <= stopIndex; i++) {\n      // 1 means loading\n      loadedRowsMap[i] = 1;\n    }\n\n    if (data.length > 19) {\n      message.warning('Virtualized List loaded all');\n      setLoading(false);\n      return;\n    }\n\n    fetchData(res => {\n      setData([...data, res.results]);\n      setLoading(false);\n    });\n  };\n\n  const isRowLoaded = ({\n    index\n  }) => !!loadedRowsMap[index];\n\n  const renderItem = ({\n    index,\n    key,\n    style\n  }) => {\n    const item = data[index];\n    return /*#__PURE__*/_jsxDEV(List.Item, {\n      style: style,\n      children: [/*#__PURE__*/_jsxDEV(List.Item.Meta, {\n        avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n          icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 29\n        }, this),\n        title: \"a\",\n        description: \"b\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\uC5B8\\uD314\\uB85C\\uC6B0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, key, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this);\n  };\n\n  const vlist = ({\n    height,\n    isScrolling,\n    onChildScroll,\n    scrollTop,\n    onRowsRendered,\n    width\n  }) => /*#__PURE__*/_jsxDEV(VList, {\n    autoHeight: true,\n    height: height,\n    isScrolling: isScrolling,\n    onScroll: onChildScroll,\n    overscanRowCount: 2,\n    rowCount: data.length,\n    rowHeight: 73,\n    rowRenderer: renderItem,\n    onRowsRendered: onRowsRendered,\n    scrollTop: scrollTop,\n    width: width\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n\n  const autoSize = ({\n    height,\n    isScrolling,\n    onChildScroll,\n    scrollTop,\n    onRowsRendered\n  }) => /*#__PURE__*/_jsxDEV(AutoSizer, {\n    disableHeight: true,\n    children: ({\n      width\n    }) => vlist({\n      height,\n      isScrolling,\n      onChildScroll,\n      scrollTop,\n      onRowsRendered,\n      width\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n\n  const infiniteLoader = ({\n    height,\n    isScrolling,\n    onChildScroll,\n    scrollTop\n  }) => /*#__PURE__*/_jsxDEV(InfiniteLoader, {\n    isRowLoaded: isRowLoaded,\n    loadMoreRows: handleInfiniteOnLoad,\n    rowCount: data.length,\n    children: ({\n      onRowsRendered\n    }) => autoSize({\n      height,\n      isScrolling,\n      onChildScroll,\n      scrollTop,\n      onRowsRendered\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: [/*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(List, {\n      children: [data.length > 0 && /*#__PURE__*/_jsxDEV(WindowScroller, {\n        children: infiniteLoader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 37\n      }, this), loading && /*#__PURE__*/_jsxDEV(Spin, {\n        className: \"demo-loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n};\n\nexport default FollowList;","map":{"version":3,"sources":["/Users/sean/Projects/dayscore/front/components/FollowList.js"],"names":["React","useEffect","useState","List","message","Avatar","Spin","Divider","reqwest","WindowScroller","AutoSizer","VList","InfiniteLoader","UserOutlined","styled","Wrapper","div","fakeDataUrl","FollowList","header","followInfo","data","setData","loading","setLoading","loadedRowsMap","fetchData","res","results","callback","url","type","method","contentType","success","handleInfiniteOnLoad","startIndex","stopIndex","i","length","warning","isRowLoaded","index","renderItem","key","style","item","vlist","height","isScrolling","onChildScroll","scrollTop","onRowsRendered","width","autoSize","infiniteLoader"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { List, message, Avatar, Spin, Divider } from 'antd';\n\nimport reqwest from 'reqwest';\n\nimport WindowScroller from 'react-virtualized/dist/commonjs/WindowScroller';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport VList from 'react-virtualized/dist/commonjs/List';\nimport InfiniteLoader from 'react-virtualized/dist/commonjs/InfiniteLoader';\nimport {UserOutlined} from \"@ant-design/icons\";\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  width: 30%;\n  margin: 10px;\n`;\n\nconst fakeDataUrl = 'https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo';\n\n\nconst FollowList = ({ header, followInfo }) => {\n    const [data, setData] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n    const loadedRowsMap = {};\n\n    useEffect(() => {\n        fetchData(res => {\n            setData(res.results);\n        });\n    }, []);\n\n    const fetchData = callback => {\n        reqwest({\n            url: fakeDataUrl,\n            type: 'json',\n            method: 'get',\n            contentType: 'application/json',\n            success: res => {\n                callback(res);\n            },\n        });\n    };\n\n    const handleInfiniteOnLoad = ({ startIndex, stopIndex }) => {\n        setLoading(true);\n        for (let i = startIndex; i <= stopIndex; i++) {\n            // 1 means loading\n            loadedRowsMap[i] = 1;\n        }\n        if (data.length > 19) {\n            message.warning('Virtualized List loaded all');\n            setLoading(false);\n            return;\n        }\n        fetchData(res => {\n            setData([...data, res.results]);\n            setLoading(false);\n        });\n    };\n\n    const isRowLoaded = ({ index }) => !!loadedRowsMap[index];\n\n    const renderItem = ({ index, key, style }) => {\n        const item = data[index];\n        return (\n            <List.Item key={key} style={style}>\n                <List.Item.Meta\n                    avatar={<Avatar icon={<UserOutlined />} />}\n                    title=\"a\"\n                    description=\"b\"\n                />\n                <div>언팔로우</div>\n            </List.Item>\n        );\n    };\n\n    const vlist = ({ height, isScrolling, onChildScroll, scrollTop, onRowsRendered, width }) => (\n        <VList\n            autoHeight\n            height={height}\n            isScrolling={isScrolling}\n            onScroll={onChildScroll}\n            overscanRowCount={2}\n            rowCount={data.length}\n            rowHeight={73}\n            rowRenderer={renderItem}\n            onRowsRendered={onRowsRendered}\n            scrollTop={scrollTop}\n            width={width}\n        />\n    );\n\n    const autoSize = ({ height, isScrolling, onChildScroll, scrollTop, onRowsRendered }) => (\n        <AutoSizer disableHeight>\n            {({ width }) =>\n                vlist({\n                    height,\n                    isScrolling,\n                    onChildScroll,\n                    scrollTop,\n                    onRowsRendered,\n                    width,\n                })\n            }\n        </AutoSizer>\n    );\n\n    const infiniteLoader = ({ height, isScrolling, onChildScroll, scrollTop }) => (\n        <InfiniteLoader\n            isRowLoaded={isRowLoaded}\n            loadMoreRows={handleInfiniteOnLoad}\n            rowCount={data.length}\n        >\n            {({ onRowsRendered }) =>\n                autoSize({\n                    height,\n                    isScrolling,\n                    onChildScroll,\n                    scrollTop,\n                    onRowsRendered,\n                })\n            }\n        </InfiniteLoader>\n    );\n\n    return (\n        <Wrapper>\n            <Divider></Divider>\n            <List>\n                {data.length > 0 && <WindowScroller>{infiniteLoader}</WindowScroller>}\n                {loading && <Spin className=\"demo-loading\" />}\n            </List>\n        </Wrapper>\n    )\n}\n\nexport default FollowList;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"/Users/sean/Projects/dayscore/front/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"/Users/sean/Projects/dayscore/front/components/FollowList.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { List, message, Avatar, Spin } from 'antd';\nimport reqwest from 'reqwest';\nimport WindowScroller from 'react-virtualized/dist/commonjs/WindowScroller';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport VList from 'react-virtualized/dist/commonjs/List';\nimport InfiniteLoader from 'react-virtualized/dist/commonjs/InfiniteLoader';\nvar fakeDataUrl = 'https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo';\n\nvar FollowList = function FollowList() {\n  _s();\n\n  var _useState = useState([]),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var loadedRowsMap = {};\n  useEffect(function () {\n    fetchData(function (res) {\n      setData(res.results);\n    });\n  }, []);\n\n  var fetchData = function fetchData(callback) {\n    reqwest({\n      url: fakeDataUrl,\n      type: 'json',\n      method: 'get',\n      contentType: 'application/json',\n      success: function success(res) {\n        callback(res);\n      }\n    });\n  };\n\n  var handleInfiniteOnLoad = function handleInfiniteOnLoad(_ref) {\n    var startIndex = _ref.startIndex,\n        stopIndex = _ref.stopIndex;\n    setLoading(true);\n\n    for (var i = startIndex; i <= stopIndex; i++) {\n      // 1 means loading\n      loadedRowsMap[i] = 1;\n    }\n\n    if (data.length > 19) {\n      message.warning('Virtualized List loaded all');\n      setLoading(false);\n      return;\n    }\n\n    fetchData(function (res) {\n      setData([].concat(_toConsumableArray(data), [res.results]));\n      setLoading(false);\n    });\n  };\n\n  var isRowLoaded = function isRowLoaded(_ref2) {\n    var index = _ref2.index;\n    return !!loadedRowsMap[index];\n  };\n\n  var renderItem = function renderItem(_ref3) {\n    var index = _ref3.index,\n        key = _ref3.key,\n        style = _ref3.style;\n    var item = data[index];\n    return /*#__PURE__*/_jsxDEV(List.Item, {\n      style: style,\n      children: [/*#__PURE__*/_jsxDEV(List.Item.Meta, {\n        avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n          src: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 29\n        }, _this),\n        title: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"https://ant.design\",\n          children: item.name.last\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 28\n        }, _this),\n        description: item.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Content\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, _this)]\n    }, key, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, _this);\n  };\n\n  var vlist = function vlist(_ref4) {\n    var height = _ref4.height,\n        isScrolling = _ref4.isScrolling,\n        onChildScroll = _ref4.onChildScroll,\n        scrollTop = _ref4.scrollTop,\n        onRowsRendered = _ref4.onRowsRendered,\n        width = _ref4.width;\n    return /*#__PURE__*/_jsxDEV(VList, {\n      autoHeight: true,\n      height: height,\n      isScrolling: isScrolling,\n      onScroll: onChildScroll,\n      overscanRowCount: 2,\n      rowCount: data.length,\n      rowHeight: 73,\n      rowRenderer: renderItem,\n      onRowsRendered: onRowsRendered,\n      scrollTop: scrollTop,\n      width: width\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, _this);\n  };\n\n  var autoSize = function autoSize(_ref5) {\n    var height = _ref5.height,\n        isScrolling = _ref5.isScrolling,\n        onChildScroll = _ref5.onChildScroll,\n        scrollTop = _ref5.scrollTop,\n        onRowsRendered = _ref5.onRowsRendered;\n    return /*#__PURE__*/_jsxDEV(AutoSizer, {\n      disableHeight: true,\n      children: function children(_ref6) {\n        var width = _ref6.width;\n        return vlist({\n          height: height,\n          isScrolling: isScrolling,\n          onChildScroll: onChildScroll,\n          scrollTop: scrollTop,\n          onRowsRendered: onRowsRendered,\n          width: width\n        });\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, _this);\n  };\n\n  var infiniteLoader = function infiniteLoader(_ref7) {\n    var height = _ref7.height,\n        isScrolling = _ref7.isScrolling,\n        onChildScroll = _ref7.onChildScroll,\n        scrollTop = _ref7.scrollTop;\n    return /*#__PURE__*/_jsxDEV(InfiniteLoader, {\n      isRowLoaded: isRowLoaded,\n      loadMoreRows: handleInfiniteOnLoad,\n      rowCount: data.length,\n      children: function children(_ref8) {\n        var onRowsRendered = _ref8.onRowsRendered;\n        return autoSize({\n          height: height,\n          isScrolling: isScrolling,\n          onChildScroll: onChildScroll,\n          scrollTop: scrollTop,\n          onRowsRendered: onRowsRendered\n        });\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(List, {\n    children: [data.length > 0 && /*#__PURE__*/_jsxDEV(WindowScroller, {\n      children: infiniteLoader\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 33\n    }, _this), state.loading && /*#__PURE__*/_jsxDEV(Spin, {\n      className: \"demo-loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 31\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(FollowList, \"e2WPURhZO+vgWkProC5DhPL24KA=\");\n\n_c = FollowList;\nexport default FollowList;\n\nvar _c;\n\n$RefreshReg$(_c, \"FollowList\");","map":{"version":3,"sources":["/Users/sean/Projects/dayscore/front/components/FollowList.js"],"names":["React","useEffect","useState","List","message","Avatar","Spin","reqwest","WindowScroller","AutoSizer","VList","InfiniteLoader","fakeDataUrl","FollowList","data","setData","loading","setLoading","loadedRowsMap","fetchData","res","results","callback","url","type","method","contentType","success","handleInfiniteOnLoad","startIndex","stopIndex","i","length","warning","isRowLoaded","index","renderItem","key","style","item","name","last","email","vlist","height","isScrolling","onChildScroll","scrollTop","onRowsRendered","width","autoSize","infiniteLoader","state"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { List, message, Avatar, Spin } from 'antd';\n\nimport reqwest from 'reqwest';\n\nimport WindowScroller from 'react-virtualized/dist/commonjs/WindowScroller';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport VList from 'react-virtualized/dist/commonjs/List';\nimport InfiniteLoader from 'react-virtualized/dist/commonjs/InfiniteLoader';\n\nconst fakeDataUrl = 'https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo';\n\n\nconst FollowList = () => {\n    const [data, setData] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n    const loadedRowsMap = {};\n\n    useEffect(() => {\n        fetchData(res => {\n            setData(res.results);\n        });\n    }, []);\n\n    const fetchData = callback => {\n        reqwest({\n            url: fakeDataUrl,\n            type: 'json',\n            method: 'get',\n            contentType: 'application/json',\n            success: res => {\n                callback(res);\n            },\n        });\n    };\n\n    const handleInfiniteOnLoad = ({ startIndex, stopIndex }) => {\n        setLoading(true);\n        for (let i = startIndex; i <= stopIndex; i++) {\n            // 1 means loading\n            loadedRowsMap[i] = 1;\n        }\n        if (data.length > 19) {\n            message.warning('Virtualized List loaded all');\n            setLoading(false);\n            return;\n        }\n        fetchData(res => {\n            setData([...data, res.results]);\n            setLoading(false);\n        });\n    };\n\n    const isRowLoaded = ({ index }) => !!loadedRowsMap[index];\n\n    const renderItem = ({ index, key, style }) => {\n        const item = data[index];\n        return (\n            <List.Item key={key} style={style}>\n                <List.Item.Meta\n                    avatar={<Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />}\n                    title={<a href=\"https://ant.design\">{item.name.last}</a>}\n                    description={item.email}\n                />\n                <div>Content</div>\n            </List.Item>\n        );\n    };\n\n    const vlist = ({ height, isScrolling, onChildScroll, scrollTop, onRowsRendered, width }) => (\n        <VList\n            autoHeight\n            height={height}\n            isScrolling={isScrolling}\n            onScroll={onChildScroll}\n            overscanRowCount={2}\n            rowCount={data.length}\n            rowHeight={73}\n            rowRenderer={renderItem}\n            onRowsRendered={onRowsRendered}\n            scrollTop={scrollTop}\n            width={width}\n        />\n    );\n\n    const autoSize = ({ height, isScrolling, onChildScroll, scrollTop, onRowsRendered }) => (\n        <AutoSizer disableHeight>\n            {({ width }) =>\n                vlist({\n                    height,\n                    isScrolling,\n                    onChildScroll,\n                    scrollTop,\n                    onRowsRendered,\n                    width,\n                })\n            }\n        </AutoSizer>\n    );\n\n    const infiniteLoader = ({ height, isScrolling, onChildScroll, scrollTop }) => (\n        <InfiniteLoader\n            isRowLoaded={isRowLoaded}\n            loadMoreRows={handleInfiniteOnLoad}\n            rowCount={data.length}\n        >\n            {({ onRowsRendered }) =>\n                autoSize({\n                    height,\n                    isScrolling,\n                    onChildScroll,\n                    scrollTop,\n                    onRowsRendered,\n                })\n            }\n        </InfiniteLoader>\n    );\n\n    return (\n        <List>\n            {data.length > 0 && <WindowScroller>{infiniteLoader}</WindowScroller>}\n            {state.loading && <Spin className=\"demo-loading\" />}\n        </List>\n    )\n}\n\nexport default FollowList;"]},"metadata":{},"sourceType":"module"}
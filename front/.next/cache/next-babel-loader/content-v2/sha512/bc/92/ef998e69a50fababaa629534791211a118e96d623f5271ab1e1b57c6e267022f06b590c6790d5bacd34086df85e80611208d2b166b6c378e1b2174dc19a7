{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/sean/Projects/dayscore/front/components/FollowList.js\";\nimport React, { useEffect, useState } from 'react';\nimport { List, message, Avatar, Spin } from 'antd';\nimport reqwest from 'reqwest';\nimport WindowScroller from 'react-virtualized/dist/commonjs/WindowScroller';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport VList from 'react-virtualized/dist/commonjs/List';\nimport InfiniteLoader from 'react-virtualized/dist/commonjs/InfiniteLoader';\nconst fakeDataUrl = 'https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo';\n\nconst FollowList = () => {\n  const {\n    0: data,\n    1: setData\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const loadedRowsMap = {};\n  useEffect(() => {\n    fetchData(res => {\n      setData(res.results);\n    });\n  }, []);\n\n  const fetchData = callback => {\n    reqwest({\n      url: fakeDataUrl,\n      type: 'json',\n      method: 'get',\n      contentType: 'application/json',\n      success: res => {\n        callback(res);\n      }\n    });\n  };\n\n  const handleInfiniteOnLoad = ({\n    startIndex,\n    stopIndex\n  }) => {\n    setLoading(true);\n\n    for (let i = startIndex; i <= stopIndex; i++) {\n      // 1 means loading\n      loadedRowsMap[i] = 1;\n    }\n\n    if (data.length > 19) {\n      message.warning('Virtualized List loaded all');\n      setLoading(false);\n      return;\n    }\n\n    fetchData(res => {\n      setData([...data, res.results]);\n      setLoading(false);\n    });\n  };\n\n  const isRowLoaded = ({\n    index\n  }) => !!loadedRowsMap[index];\n\n  const renderItem = ({\n    index,\n    key,\n    style\n  }) => {\n    const item = data[index];\n    return /*#__PURE__*/_jsxDEV(List.Item, {\n      style: style,\n      children: [/*#__PURE__*/_jsxDEV(List.Item.Meta, {\n        avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n          src: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 29\n        }, this),\n        title: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"https://ant.design\",\n          children: item.name.last\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 28\n        }, this),\n        description: item.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Content\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, key, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this);\n  };\n\n  const vlist = ({\n    height,\n    isScrolling,\n    onChildScroll,\n    scrollTop,\n    onRowsRendered,\n    width\n  }) => /*#__PURE__*/_jsxDEV(VList, {\n    autoHeight: true,\n    height: height,\n    isScrolling: isScrolling,\n    onScroll: onChildScroll,\n    overscanRowCount: 2,\n    rowCount: data.length,\n    rowHeight: 73,\n    rowRenderer: renderItem,\n    onRowsRendered: onRowsRendered,\n    scrollTop: scrollTop,\n    width: width\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 9\n  }, this);\n\n  const autoSize = ({\n    height,\n    isScrolling,\n    onChildScroll,\n    scrollTop,\n    onRowsRendered\n  }) => /*#__PURE__*/_jsxDEV(AutoSizer, {\n    disableHeight: true,\n    children: ({\n      width\n    }) => vlist({\n      height,\n      isScrolling,\n      onChildScroll,\n      scrollTop,\n      onRowsRendered,\n      width\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this);\n\n  const infiniteLoader = ({\n    height,\n    isScrolling,\n    onChildScroll,\n    scrollTop\n  }) => /*#__PURE__*/_jsxDEV(InfiniteLoader, {\n    isRowLoaded: isRowLoaded,\n    loadMoreRows: handleInfiniteOnLoad,\n    rowCount: data.length,\n    children: ({\n      onRowsRendered\n    }) => autoSize({\n      height,\n      isScrolling,\n      onChildScroll,\n      scrollTop,\n      onRowsRendered\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(List, {\n    children: [data.length > 0 && /*#__PURE__*/_jsxDEV(WindowScroller, {\n      children: infiniteLoader\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 33\n    }, this), state.loading && /*#__PURE__*/_jsxDEV(Spin, {\n      className: \"demo-loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 31\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 9\n  }, this);\n};\n\nexport default FollowList;","map":{"version":3,"sources":["/Users/sean/Projects/dayscore/front/components/FollowList.js"],"names":["React","useEffect","useState","List","message","Avatar","Spin","reqwest","WindowScroller","AutoSizer","VList","InfiniteLoader","fakeDataUrl","FollowList","data","setData","loading","setLoading","loadedRowsMap","fetchData","res","results","callback","url","type","method","contentType","success","handleInfiniteOnLoad","startIndex","stopIndex","i","length","warning","isRowLoaded","index","renderItem","key","style","item","name","last","email","vlist","height","isScrolling","onChildScroll","scrollTop","onRowsRendered","width","autoSize","infiniteLoader","state"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { List, message, Avatar, Spin } from 'antd';\n\nimport reqwest from 'reqwest';\n\nimport WindowScroller from 'react-virtualized/dist/commonjs/WindowScroller';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport VList from 'react-virtualized/dist/commonjs/List';\nimport InfiniteLoader from 'react-virtualized/dist/commonjs/InfiniteLoader';\n\nconst fakeDataUrl = 'https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo';\n\n\nconst FollowList = () => {\n    const [data, setData] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n    const loadedRowsMap = {};\n\n    useEffect(() => {\n        fetchData(res => {\n            setData(res.results);\n        });\n    }, []);\n\n    const fetchData = callback => {\n        reqwest({\n            url: fakeDataUrl,\n            type: 'json',\n            method: 'get',\n            contentType: 'application/json',\n            success: res => {\n                callback(res);\n            },\n        });\n    };\n\n    const handleInfiniteOnLoad = ({ startIndex, stopIndex }) => {\n        setLoading(true);\n        for (let i = startIndex; i <= stopIndex; i++) {\n            // 1 means loading\n            loadedRowsMap[i] = 1;\n        }\n        if (data.length > 19) {\n            message.warning('Virtualized List loaded all');\n            setLoading(false);\n            return;\n        }\n        fetchData(res => {\n            setData([...data, res.results]);\n            setLoading(false);\n        });\n    };\n\n    const isRowLoaded = ({ index }) => !!loadedRowsMap[index];\n\n    const renderItem = ({ index, key, style }) => {\n        const item = data[index];\n        return (\n            <List.Item key={key} style={style}>\n                <List.Item.Meta\n                    avatar={<Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />}\n                    title={<a href=\"https://ant.design\">{item.name.last}</a>}\n                    description={item.email}\n                />\n                <div>Content</div>\n            </List.Item>\n        );\n    };\n\n    const vlist = ({ height, isScrolling, onChildScroll, scrollTop, onRowsRendered, width }) => (\n        <VList\n            autoHeight\n            height={height}\n            isScrolling={isScrolling}\n            onScroll={onChildScroll}\n            overscanRowCount={2}\n            rowCount={data.length}\n            rowHeight={73}\n            rowRenderer={renderItem}\n            onRowsRendered={onRowsRendered}\n            scrollTop={scrollTop}\n            width={width}\n        />\n    );\n\n    const autoSize = ({ height, isScrolling, onChildScroll, scrollTop, onRowsRendered }) => (\n        <AutoSizer disableHeight>\n            {({ width }) =>\n                vlist({\n                    height,\n                    isScrolling,\n                    onChildScroll,\n                    scrollTop,\n                    onRowsRendered,\n                    width,\n                })\n            }\n        </AutoSizer>\n    );\n\n    const infiniteLoader = ({ height, isScrolling, onChildScroll, scrollTop }) => (\n        <InfiniteLoader\n            isRowLoaded={isRowLoaded}\n            loadMoreRows={handleInfiniteOnLoad}\n            rowCount={data.length}\n        >\n            {({ onRowsRendered }) =>\n                autoSize({\n                    height,\n                    isScrolling,\n                    onChildScroll,\n                    scrollTop,\n                    onRowsRendered,\n                })\n            }\n        </InfiniteLoader>\n    );\n\n    return (\n        <List>\n            {data.length > 0 && <WindowScroller>{infiniteLoader}</WindowScroller>}\n            {state.loading && <Spin className=\"demo-loading\" />}\n        </List>\n    )\n}\n\nexport default FollowList;"]},"metadata":{},"sourceType":"module"}